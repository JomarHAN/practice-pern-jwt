[{"/Users/jomarnguyen/Desktop/pern-jwt/client/src/index.js":"1","/Users/jomarnguyen/Desktop/pern-jwt/client/src/App.js":"2","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Dashboard.jsx":"3","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Header.jsx":"4","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Login.jsx":"5","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Register.jsx":"6","/Users/jomarnguyen/Desktop/pern-jwt/client/src/ContextAPI/StateProvider.js":"7","/Users/jomarnguyen/Desktop/pern-jwt/client/src/ContextAPI/reducer.js":"8","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Gallery.jsx":"9","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Upload.jsx":"10","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/ImageCom.jsx":"11","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Edit.jsx":"12"},{"size":430,"mtime":1612304183390,"results":"13","hashOfConfig":"14"},{"size":2475,"mtime":1612652393101,"results":"15","hashOfConfig":"14"},{"size":994,"mtime":1612652969817,"results":"16","hashOfConfig":"14"},{"size":1860,"mtime":1612674836121,"results":"17","hashOfConfig":"14"},{"size":1836,"mtime":1612675166690,"results":"18","hashOfConfig":"14"},{"size":2088,"mtime":1612675644029,"results":"19","hashOfConfig":"14"},{"size":367,"mtime":1612304676944,"results":"20","hashOfConfig":"14"},{"size":722,"mtime":1612651235191,"results":"21","hashOfConfig":"14"},{"size":2001,"mtime":1612652620729,"results":"22","hashOfConfig":"14"},{"size":2325,"mtime":1612578786676,"results":"23","hashOfConfig":"14"},{"size":402,"mtime":1612591314030,"results":"24","hashOfConfig":"14"},{"size":2927,"mtime":1612674603886,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1y645hb",{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"28"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"28"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"28"},"/Users/jomarnguyen/Desktop/pern-jwt/client/src/index.js",[],["56","57"],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/App.js",["58"],"import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport Header from \"./components/Header\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport { useStateValue } from \"./ContextAPI/StateProvider\";\nimport Dashboard from \"./components/Dashboard\";\nimport Gallery from \"./components/Gallery\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Edit from \"./components/Edit\";\n\nfunction App() {\n  const [{ isAuth, imageEdit }, dispatch] = useStateValue();\n\n  const isVerify = async () => {\n    if (localStorage.token) {\n      const response = await fetch(\"http://localhost:5000/auth/is-verify\", {\n        method: \"GET\",\n        headers: { token: localStorage.token },\n      });\n      const parseRes = await response.json();\n\n      if (parseRes === \"Unauthorize\") {\n        dispatch({\n          type: \"SET_ISAUTH\",\n          isAuth: false,\n        });\n        localStorage.removeItem(\"token\");\n      } else {\n        dispatch({\n          type: \"SET_ISAUTH\",\n          isAuth: true,\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    isVerify();\n  }, []);\n\n  return (\n    <Router>\n      <ToastContainer />\n      <div className=\"app\">\n        <div className=\"app__nav\">\n          <Header />\n        </div>\n        <div className=\"app__body container\">\n          <Switch>\n            <Route\n              exact\n              path=\"/login\"\n              render={(props) =>\n                !isAuth ? <Login {...props} /> : <Redirect to=\"/\" />\n              }\n            />\n            <Route\n              exact\n              path=\"/register\"\n              render={(props) =>\n                !isAuth ? <Register {...props} /> : <Redirect to=\"/\" />\n              }\n            />\n            <Route\n              exact\n              path=\"/gallery\"\n              render={(props) =>\n                isAuth ? <Gallery {...props} /> : <Redirect to=\"/\" />\n              }\n            />\n            <Route\n              exact\n              path={`/edit/${imageEdit?.image_title}`}\n              render={(props) =>\n                isAuth ? <Edit {...props} /> : <Redirect to=\"/\" />\n              }\n            />\n            <Route exact path=\"/\">\n              <Dashboard />\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Dashboard.jsx",["59"],"import React, { useEffect } from \"react\";\nimport { useStateValue } from \"../ContextAPI/StateProvider\";\nimport \"./Dashboard.css\";\nimport Upload from \"./Upload\";\n\nfunction Dashboard() {\n  const [{ isAuth, user }, dispatch] = useStateValue();\n\n  const getUserName = async () => {\n    const response = await fetch(\"http://localhost:5000/dashboard\", {\n      method: \"GET\",\n      headers: { token: localStorage.token },\n    });\n    const parseRes = await response.json();\n    // console.log(parseRes);\n    if (parseRes) {\n      dispatch({\n        type: \"SET_USER\",\n        user: parseRes,\n      });\n    } else {\n      localStorage.removeItem(\"token\");\n    }\n  };\n\n  useEffect(() => {\n    getUserName();\n  }, []);\n  return (\n    <div className=\"dashboard\">\n      {isAuth ? (\n        <div className=\"dashboard__upload\">\n          <h1>Welcome {user?.user_name}</h1>\n          <Upload />\n        </div>\n      ) : (\n        <h1>you need to login</h1>\n      )}\n    </div>\n  );\n}\n\nexport default Dashboard;\n","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Header.jsx",[],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Login.jsx",["60"],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Register.jsx",["61"],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/ContextAPI/StateProvider.js",[],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/ContextAPI/reducer.js",["62"],"export const initialState = {\n    isAuth: false,\n    user: null,\n    imageEdit: [],\n    isGallery: true\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case \"SET_ISAUTH\":\n            return {\n                ...state,\n                isAuth: action.isAuth\n            };\n        case \"SET_USER\":\n            return {\n                ...state,\n                user: action.user\n            };\n        case \"SET_IMAGEEDIT\":\n            return {\n                ...state,\n                imageEdit: action.imageEdit\n            };\n        case \"SET_ISGALLERY\":\n            return {\n                ...state,\n                isGallery: action.isGallery\n            }\n    }\n}\n\nexport default reducer;","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Gallery.jsx",["63","64"],"import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useStateValue } from \"../ContextAPI/StateProvider\";\nimport \"./Gallery.css\";\nimport ImageCom from \"./ImageCom\";\n\nfunction Gallery() {\n  const [{ user }, dispatch] = useStateValue();\n  const [images, setImages] = useState([]);\n\n  const getImages = async () => {\n    const response = await fetch(`/dashboard/retrieve/${user?.user_id}`, {\n      method: \"GET\",\n    });\n    const parseRes = await response.json();\n    setImages(parseRes.rows);\n  };\n\n  useEffect(() => {\n    getImages();\n  }, []);\n\n  const handleRemove = async (cloud_id) => {\n    try {\n      const response = await fetch(`/gallery/delete?cloud_id=${cloud_id}`, {\n        method: \"DELETE\",\n      });\n      const parseRes = await response.json();\n      console.log(parseRes);\n      setImages(images.filter((image) => image.cloud_id !== cloud_id));\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  const moveToEdit = (image) => {\n    dispatch({\n      type: \"SET_ISGALLERY\",\n      isGallery: true,\n    });\n    dispatch({\n      type: \"SET_IMAGEEDIT\",\n      imageEdit: image,\n    });\n  };\n\n  return (\n    <div className=\"gallery\">\n      <h1>Gallery here</h1>\n      <div className=\"gallery__container\">\n        {images?.map((image) => (\n          <div className=\"gallery__item\">\n            <ImageCom image={image} />\n            <div className=\"gallery__groupBtn\">\n              <Link\n                to={`/edit/${image.image_title}`}\n                className=\"btn btn-primary\"\n                onClick={() => moveToEdit(image)}\n              >\n                Edit\n              </Link>\n              <button\n                className=\"btn btn-danger\"\n                onClick={() => handleRemove(image.cloud_id)}\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Gallery;\n","/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Upload.jsx",[],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/ImageCom.jsx",[],"/Users/jomarnguyen/Desktop/pern-jwt/client/src/components/Edit.jsx",["65"],"import { Image } from \"cloudinary-react\";\nimport React, { useState } from \"react\";\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useStateValue } from \"../ContextAPI/StateProvider\";\nimport \"./Edit.css\";\n\nfunction Edit() {\n  const [{ imageEdit }] = useStateValue();\n  const [title, setTitle] = useState(imageEdit?.image_title);\n  const [imageFile, setImageFile] = useState(\"\");\n  const [preview, setPreview] = useState(\"\");\n  const history = useHistory();\n\n  const handleOnChangeImage = (e) => {\n    setImageFile(e.target.value);\n    const file = e.target.files[0];\n    file && handlePreview(file);\n  };\n\n  const handlePreview = (file) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      setPreview(reader.result);\n    };\n  };\n\n  const onSubmitUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await fetch(\n        `http://localhost:5000/gallery/update?cloud_id=${imageEdit.cloud_id}`,\n        {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            title: title,\n            image: preview,\n          }),\n        }\n      );\n      const parseRes = await response.json();\n      if (parseRes.result) {\n        toast.success(parseRes.message);\n        history.push(\"/gallery\");\n      } else {\n        toast.error(parseRes.message);\n      }\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  return (\n    <div className=\"edit\">\n      <h1 className=\"my-4\">Edit Page</h1>\n      <div className=\"edit__groupImg\">\n        <div className=\"edit__imgLeft\">\n          <Image\n            cloudName=\"jomar-cloud\"\n            publicId={imageEdit.image_url}\n            width=\"400\"\n            crop=\"scale\"\n          />\n        </div>\n        <div className=\"edit__imgRight\">\n          {preview ? (\n            <img src={preview} alt=\"chosen\" />\n          ) : (\n            <h3>No file chosen</h3>\n          )}\n        </div>\n      </div>\n      <form className=\"edit__form\" onSubmit={(e) => onSubmitUpdate(e)}>\n        <input\n          type=\"text\"\n          placeholder={imageEdit.image_title}\n          className=\"form-control my-3\"\n          name=\"title\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        <input\n          type=\"file\"\n          className=\"form-control my-3\"\n          value={imageFile}\n          onChange={(e) => handleOnChangeImage(e)}\n        />\n        <button\n          disabled={!preview ? true : false}\n          className={`btn btn-${\n            !preview ? \"secondary\" : \"success\"\n          } form-control my-2`}\n        >\n          Update\n        </button>\n        <Link to=\"/gallery\" className=\"btn btn-secondary form-control my-2\">\n          Cancel\n        </Link>\n      </form>\n    </div>\n  );\n}\n\nexport default Edit;\n",{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":47,"column":6,"nodeType":"72","endLine":47,"endColumn":8,"suggestions":"73"},{"ruleId":"70","severity":1,"message":"74","line":28,"column":6,"nodeType":"72","endLine":28,"endColumn":8,"suggestions":"75"},{"ruleId":"76","severity":1,"message":"77","line":7,"column":10,"nodeType":"78","messageId":"79","endLine":7,"endColumn":12},{"ruleId":"76","severity":1,"message":"77","line":7,"column":10,"nodeType":"78","messageId":"79","endLine":7,"endColumn":12},{"ruleId":"80","severity":1,"message":"81","line":9,"column":5,"nodeType":"82","messageId":"83","endLine":30,"endColumn":6},{"ruleId":"84","severity":1,"message":"85","line":3,"column":10,"nodeType":"86","messageId":"87","endLine":3,"endColumn":15},{"ruleId":"70","severity":1,"message":"88","line":22,"column":6,"nodeType":"72","endLine":22,"endColumn":8,"suggestions":"89"},{"ruleId":"84","severity":1,"message":"90","line":3,"column":16,"nodeType":"86","messageId":"87","endLine":3,"endColumn":24},"no-native-reassign",["91"],"no-negated-in-lhs",["92"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'isVerify'. Either include it or remove the dependency array.","ArrayExpression",["93"],"React Hook useEffect has a missing dependency: 'getUserName'. Either include it or remove the dependency array.",["94"],"no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","no-unused-vars","'toast' is defined but never used.","Identifier","unusedVar","React Hook useEffect has a missing dependency: 'getImages'. Either include it or remove the dependency array.",["95"],"'Redirect' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"96","fix":"97"},{"desc":"98","fix":"99"},{"desc":"100","fix":"101"},"Update the dependencies array to be: [isVerify]",{"range":"102","text":"103"},"Update the dependencies array to be: [getUserName]",{"range":"104","text":"105"},"Update the dependencies array to be: [getImages]",{"range":"106","text":"107"},[1248,1250],"[isVerify]",[702,704],"[getUserName]",[628,630],"[getImages]"]